## Intro

This repo generates responsive & compliant email templates.

It relies on two main components:

* Foundation [Pipeline for building emails](https://foundation.zurb.com/emails/docs/zurb-stack.html)
    * Convert `<row>` & `<columns>` tags to `<table>` with Inky
    * Compile sass & inline css
    * Flatten to single line
    * Image compression
* Liquid (Template language for customer.io)


## Setup

Setup is required to start development.

**Bulding foundation**

`cd foundation`

`npm install` (Installs all dependencies to run foundation & build emails)

A `node_modules` folder will be created.


## Development

**Start the foundation gulp task to build foundation/src/pages/.html**

`cd foundation`

`npm run build` (Final build) OR `foundation watch` (Temp build)

This will open the browser to the root localhost.

Change your path to view the correct file.

E.g. `http://127.0.0.1:5500/foundation/dist/lead.html`

**Start the liquid template task**

If the email generated by foundation contains liquid templates `\{{}}` then it can be templated into the `/build` folder by running the `build.sh` script.

Example:

`./build.sh "/foundation/dist/lead.html" "/data/lead.json" "/build/lead.html"`

This takes data from `/data/lead.json` injects it into `/foundation/dist/lead.html` and stores
it into `/build/lead.html`. Any changes to the data  or html file will cause a rebuild.

Change your path to view the correct file.

E.g. `http://127.0.0.1:5500/build/lead.html`

Note: This should be built into foundation as a gulp task instead of being run independently.

**Unpersist cache**

With the servers, sometimes the changes are not reloaded because of the cache.

In chrome, `Settings > More Tools > Developer Tools`

Go to the `Network Tab` click `Disable Cache`

Still not refreshing? 

* Refresh the browser manually
* Check the logs

**Change Styles**

The styles can be changed in `/foundation/src/assets/scss`

The `_settings.scss` is to override variables.

The `app.scss` is to override styles.

The styles being overriden are in  `/foundation/node_modules/foundation-emails/scss`

The main file is `foundation-emails.scss`. For reference only. Do not change.

**Stopping scripts**

`Control + C`


**Cant see the files in the browser?**

Try running a live server on the page.

Visual studio code has live server plugin.

Try opening the file directly from the file browser if none else works.